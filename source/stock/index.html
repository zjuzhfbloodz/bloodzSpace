<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A股看盘 Demo</title>
  <link rel="stylesheet" href="/stock/assets/stock.css" />
</head>
<body>
  <div class="container">
    <div class="card toolbar">
      <div class="toolbar-top">
        <div class="search-wrap">
          <input id="symbolInput" type="text" placeholder="输入 sh600519 或 sz000001" value="sh600519" />
          <button id="searchBtn">查询</button>
          <button id="refreshBtn" class="secondary">立即刷新</button>
        </div>
      </div>

      <div class="toolbar-top">
        <label class="switch-wrap">数据模式
          <select id="dataMode">
            <option value="api" selected>实时API（默认）</option>
            <option value="mock">模拟数据</option>
          </select>
        </label>

        <label class="switch-wrap">
          <input id="autoRefresh" type="checkbox" checked />
          自动刷新
        </label>

        <label class="switch-wrap">刷新间隔
          <select id="refreshInterval">
            <option value="3">3 秒</option>
            <option value="5" selected>5 秒</option>
            <option value="10">10 秒</option>
            <option value="15">15 秒</option>
          </select>
        </label>
      </div>

      <div class="toolbar-bottom">
        <span id="dataSource">数据源：--</span>
        <span id="connectionStatus" class="status-pill">连接状态：--</span>
        <span id="lastUpdate">最后更新时间：--</span>
      </div>

      <div id="errorText" class="error-text"></div>
    </div>

    <div class="layout">
      <div class="card">
        <div class="quote">
          <div class="headline">
            <div>
              <div id="stockName">--</div>
              <div id="stockSymbol" class="symbol">--</div>
            </div>
          </div>

          <div class="price-row">
            <div id="latestPrice" class="latest">--</div>
            <div id="delta" class="delta">--</div>
          </div>

          <div class="stats">
            <div class="stat"><div class="label">今开</div><div id="open" class="value">--</div></div>
            <div class="stat"><div class="label">最高</div><div id="high" class="value">--</div></div>
            <div class="stat"><div class="label">最低</div><div id="low" class="value">--</div></div>
            <div class="stat"><div class="label">成交量</div><div id="volume" class="value">--</div></div>
            <div class="stat"><div class="label">成交额</div><div id="amount" class="value">--</div></div>
            <div class="stat"><div class="label">涨跌额</div><div id="change" class="value">--</div></div>
            <div class="stat"><div class="label">涨跌幅</div><div id="changePct" class="value">--</div></div>
            <div class="stat"><div class="label">状态</div><div id="status" class="value">--</div></div>
          </div>
        </div>

        <div class="chart-wrap">
          <div class="chart-box">
            <canvas id="minuteChart"></canvas>
          </div>
        </div>

        <div class="notice">说明：实时 API 模式会请求本地代理 <code>/api/quote?symbol=...</code>；若接口超时或报错将自动降级为模拟数据，页面保持可用。</div>
      </div>

      <div class="card watchlist">
        <h3 class="watch-title">自选股</h3>
        <div id="watchList"></div>
      </div>
    </div>
  </div>

  <script src="/stock/assets/stock.js"></script>
</body>
</html>
